<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:viewModels="clr-namespace:uchat_client.ViewModels"
             xmlns:views="clr-namespace:uchat_client.Views"
             x:Class="uchat_client.Views.MyAccountView"
             x:DataType="viewModels:MyAccountViewModel"
             Background="#364D70">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <!-- REUSABLE SIDEBAR -->
        <views:SidebarView Grid.Column="0"
                           DataContext="{Binding SidebarViewModel}" />
        
        <Grid Grid.Column="1" RowDefinitions="Auto, *">
            <!-- Header with back button and title -->
            <StackPanel Grid.Row="0" 
                        Orientation="Horizontal" 
                        HorizontalAlignment="Center"
                        Spacing="15"
                        Margin="0,60,50,15">
                
                <Button Command="{Binding BackCommand}"
                        Width="40" Height="40"
                        CornerRadius="20"
                        Padding="0"
                        Background="Transparent"
                        VerticalAlignment="Center">
                    
                    <Button.Styles>
                        <Style Selector="Button:pointerover /template/ ContentPresenter">
                            <Setter Property="Background" Value="#4CFFFFFF"/>
                        </Style>
                    </Button.Styles>

                    <Path Fill="White" 
                          Stretch="Uniform" 
                          Width="20" Height="20"
                          HorizontalAlignment="Center" 
                          VerticalAlignment="Center"
                          Data="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"/>
                </Button>

                <TextBlock Text="My Account" 
                           Foreground="White" 
                           FontSize="26" 
                           FontFamily="{StaticResource LibraFontBold}"
                           VerticalAlignment="Center"/>
            </StackPanel>

            <!-- Content area -->
            <Border Grid.Row="1" 
                    Background="#96ADD6"
                    CornerRadius="25"
                    Padding="30"
                    MaxWidth="500"
                    VerticalAlignment="Top"
                    Margin="30,0,30,30">
                
                <Grid RowDefinitions="Auto, Auto, Auto">
                    <TextBlock Grid.Row="0" 
                               Text="Change password"
                               Foreground="#324660"
                               FontSize="20"
                               FontFamily="{StaticResource LibraFontBold}"
                               Margin="0,0,0,15"/>

                    <Border Grid.Row="1"
                            Background="#BAD6FA"
                            CornerRadius="20"
                            Padding="30">
                        <StackPanel Spacing="10">
                            
                            <TextBlock Text="Enter current password:" 
                                       Foreground="White"
                                       FontFamily="{StaticResource LibraFontBold}"
                                       HorizontalAlignment="Center"/>
                            <TextBox Text="{Binding CurrentPassword}" 
                                     PasswordChar="*"
                                     CornerRadius="15"
                                     Foreground="Black"
                                     CaretBrush="#364D70"
                                     Background="White"
                                     BorderThickness="0"
                                     Height="35"
                                     Width="250">
                                <TextBox.Styles>
                                    <Style Selector="TextBox:pointerover /template/ Border#PART_BorderElement">
                                        <Setter Property="Background" Value="White"/>
                                        <Setter Property="BorderBrush" Value="#364D70"/>
                                    </Style>
                                    <Style Selector="TextBox:focus /template/ Border#PART_BorderElement">
                                        <Setter Property="Background" Value="White"/>
                                        <Setter Property="BorderBrush" Value="#364D70"/>
                                    </Style>
                                </TextBox.Styles>
                            </TextBox>

                            <TextBlock Text="Enter new password :"
                                       Foreground="White"
                                       FontFamily="{StaticResource LibraFontBold}"
                                       HorizontalAlignment="Center"
                                       Margin="0,5,0,0"/>
                            <TextBox Text="{Binding NewPassword}" 
                                     PasswordChar="*"
                                     CornerRadius="15"
                                     Foreground="Black"
                                     CaretBrush="#364D70"
                                     Background="White"
                                     BorderThickness="0"
                                     Height="35"
                                     Width="250">
                                
                                <TextBox.Styles>
                                    <Style Selector="TextBox:pointerover /template/ Border#PART_BorderElement">
                                        <Setter Property="Background" Value="White"/>
                                        <Setter Property="BorderBrush" Value="#364D70"/>
                                    </Style>
                                    <Style Selector="TextBox:focus /template/ Border#PART_BorderElement">
                                        <Setter Property="Background" Value="White"/>
                                        <Setter Property="BorderBrush" Value="#364D70"/>
                                    </Style>
                                </TextBox.Styles>
                            </TextBox>
                            
                            <Button Command="{Binding ChangePasswordCommand}"
                                    Content="Save password"
                                    Background="#364D70"
                                    Foreground="White"
                                    CornerRadius="20"
                                    Padding="30,10"
                                    FontSize="16"
                                    FontWeight="SemiBold"
                                    FontFamily="{StaticResource LibraFont}"
                                    HorizontalAlignment="Center"
                                    Margin="0,15,0,0">
                                <Button.Styles>
                                    <Style Selector="Button:pointerover /template/ ContentPresenter">
                                        <Setter Property="Background" Value="White"/>
                                        <Setter Property="Foreground" Value="#364D70"/>
                                    </Style>
                                </Button.Styles>
                            </Button>
                        </StackPanel>
                    </Border>

                    <Button Grid.Row="2"
                            Command="{Binding DeleteAccountCommand}"
                            Content="Delete account"
                            Foreground="#FF4444"
                            Background="Transparent"
                            FontFamily="{StaticResource LibraFontBold}"
                            FontSize="16"
                            HorizontalAlignment="Left"
                            Margin="340,15,0,0"
                            Padding="0" 
                            BorderThickness="0"/>
                    <Button Grid.Row="2"
                            Command="{Binding LogOutCommand}"
                            Content="Log Out"
                            Foreground="#FFFFFF"
                            Background="Transparent"
                            FontFamily="{StaticResource LibraFontBold}"
                            FontSize="16"
                            HorizontalAlignment="Left"
                            Margin="0,15,0,0"
                            Padding="0" 
                            BorderThickness="0"/>
                </Grid>
            </Border>
        </Grid>
    </Grid>
</UserControl>